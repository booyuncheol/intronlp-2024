# 9주차 세션 1: 프롬프트 엔지니어링 소개와 핵심 기법

## 개요

이번 세션에서는 **프롬프트 엔지니어링**의 기본 개념을 탐구하며, 이는 **대형 언어 모델(LLMs)**을 효과적으로 활용하기 위한 필수 기술입니다. 프롬프트 엔지니어링이 무엇인지, **자연어 처리(NLP)**에서의 중요성, 그리고 어떻게 발전해왔는지를 논의할 것입니다. 또한 **제로샷 프롬프트**, **퓨샷 프롬프트**, **체인-오브-생각(Chain-of-Thought)** 접근법과 같은 핵심 프롬프트 기법을 소개합니다. 이 세션이 끝나면, 다양한 NLP 작업에서 LLM의 성능을 최적화하기 위한 효과적인 프롬프트를 설계하는 데 필요한 탄탄한 기반을 갖추게 될 것입니다.

## 소개

**대형 언어 모델**이 점점 더 강력해지고 AI 애플리케이션에 필수적인 요소가 됨에 따라, 이들과 상호 작용하는 방법이 매우 중요해졌습니다. **프롬프트 엔지니어링**은 원하는 출력을 생성하도록 LLM을 안내하는 입력을 설계하는 예술이자 과학입니다. 이는 텍스트 생성, 번역, 문제 해결, 코드 완성 등 다양한 NLP 작업에서 LLM의 모든 잠재력을 활용하는 데 중요한 역할을 합니다. 프롬프트 엔지니어링을 이해하면 광범위한 미세 조정이나 대용량 데이터 세트 없이도 모델 성능을 최적화할 수 있습니다.

## 1. 프롬프트 엔지니어링이란 무엇인가?

- **정의**: 프롬프트 엔지니어링은 LLM으로부터 특정하고 최적의 응답을 이끌어내기 위해 입력 프롬프트를 설계하고 개선하는 과정입니다.
  - 사용자의 의도에 맞는 출력을 생성하도록 모델을 안내하는 질문, 명령문 또는 지시사항을 작성하는 것을 포함합니다.
- **LLM에서의 중요성**:
  - LLM은 입력 프롬프트에 매우 민감하며, 작은 변화도 출력에 큰 영향을 미칠 수 있습니다.
  - 효과적인 프롬프트 엔지니어링은 추가적인 학습이나 데이터 없이도 모델의 성능을 향상시킬 수 있습니다.
- **LLM 성능 최적화에서의 역할**:
  - 프롬프트를 신중하게 설계함으로써 모델의 **정확성**, **관련성**, **유용성**을 개선할 수 있습니다.
  - 모델의 동작을 더 잘 제어할 수 있어, 특정 응용 분야에 적합한 출력을 보장합니다.

**요약**: 프롬프트 엔지니어링은 LLM과 효과적으로 상호 작용하는 데 필수적이며, 우리의 목표에 맞는 잘 설계된 프롬프트를 작성함으로써 출력물을 최적화할 수 있게 해줍니다.

## 2. 프롬프트 기법의 발전

- **단순한 질의에서 정교한 전략으로**:
  - **초기 NLP 시스템**: 엄격한 키워드 기반 입력이 필요했습니다 (예: "날씨 서울").
  - **현대의 LLM**: 자연어를 이해하고 복잡하고 미묘한 프롬프트를 처리할 수 있습니다 (예: "오늘 서울의 날씨는 어떻습니까?").
- **LLM 출력 품질과 작업 성능에 대한 영향**:
  - 고급 프롬프트 기법은 LLM의 모든 기능을 활용하게 해줍니다.
  - 번역, 요약, 추론, 창의적 글쓰기와 같은 작업에서 출력이 향상되었습니다.
- **발전의 예시**:
  - **규칙 기반 입력**에서 **자연어 프롬프트**로의 전환.
  - 복잡한 작업의 성능을 향상시키는 **퓨샷 프롬프트**와 **체인-오브-생각 프롬프트**와 같은 기법의 도입.

**요약**: 프롬프트 기법은 크게 발전하여 LLM의 성능을 향상시키고 인간과 AI 사이의 더 자연스럽고 효과적인 상호 작용을 가능하게 했습니다.

## 3. 핵심 프롬프트 기법

### 3.1 제로샷 프롬프트

- **개념과 적용**:
  - **제로샷 프롬프트**는 모델에게 특정 작업에 대한 예제나 사전 학습 없이 작업을 수행하도록 요청하는 것을 의미합니다.
  - 모델은 사전에 학습한 지식을 기반으로 작업을 이해하고 수행합니다.
- **장점**:
  - **효율성**: 추가 데이터나 예제가 필요 없습니다.
  - **유연성**: 다양한 작업에 적용할 수 있습니다.
- **제한사항**:
  - 복잡하거나 모호한 작업에서 어려움을 겪을 수 있습니다.
  - 프롬프트의 명확성에 따라 출력 품질이 달라질 수 있습니다.
- **예시**:
  - **번역**:
    - 프롬프트: _"다음 문장을 독일어로 번역하세요: '회의는 내일 오전 9시에 시작합니다.'"_
  - **요약**:
    - 프롬프트: _"다음 기사를 한 문장으로 요약하세요: [기사 내용]"_
  - **감정 분석**:
    - 프롬프트: _"다음 리뷰의 감정을 긍정, 부정 또는 중립으로 판단하세요: '제품은 광고된 대로 작동하지만 고객 서비스는 도움이 되지 않았습니다.'"_

**요약**: 제로샷 프롬프트는 모델의 기존 지식을 활용하여 예제 없이 작업을 수행하며, 간단한 작업에 적합하지만 더 복잡하거나 미묘한 요청에서는 어려움을 겪을 수 있습니다.

### 3.2 퓨샷 프롬프트

- **정의와 사용 사례**:
  - **퓨샷 프롬프트**는 프롬프트 내에 몇 가지 예제를 제공하여 모델이 작업을 이해하도록 돕습니다.
  - 제로샷 프롬프트로 만족스러운 결과를 얻지 못할 때 유용합니다.
- **제로샷 프롬프트와의 비교**:
  - **성능 향상**: 예제는 모델이 원하는 출력 형식과 작업의 구체성을 추론하는 데 도움을 줍니다.
  - **복잡성**: 혼란이나 편향을 피하기 위해 예제를 신중하게 선택해야 합니다.
- **효과적인 퓨샷 프롬프트 설계 기법**:
  - **명확하고 대표적인 예제 선택**: 예제가 관련성이 있고 작업을 정확하게 보여주는지 확인합니다.
  - **일관된 형식 유지**: 모든 예제에 동일한 구조를 사용합니다.
  - **예제 수 제한**: 토큰 제한을 고려하고, 양보다 질에 집중합니다.
- **예시**:

  - **감정 분석**:

    ```
    리뷰: "영화는 환상적이고 놀라움으로 가득했습니다."
    감정: 긍정

    리뷰: "영화를 즐기지 못했습니다; 너무 길고 지루했어요."
    감정: 부정

    리뷰: "사운드트랙은 놀라웠지만, 스토리는 약했어요."
    감정:
    ```

  - **문법 교정**:

    ```
    잘못된 문장: "그녀는 사과를 좋아하지 않아요."
    올바른 문장: "그녀는 사과를 좋아하지 않습니다."

    잘못된 문장: "그들은 공원에 가고 있어요."
    올바른 문장: "그들은 공원에 가고 있습니다."

    잘못된 문장: "그는 차를 가지고 있어요."
    올바른 문장:
    ```

**요약**: 퓨샷 프롬프트는 예제를 제공하여 모델의 성능을 향상시키며, 이를 통해 모델이 작업을 더 잘 이해하고 정확한 출력을 생성하도록 돕습니다.

### 3.3 체인-오브-생각 기법

- **체인-오브-생각 접근법 설명**:
  - 최종 답변을 내리기 전에 중간 추론 단계를 생성하도록 모델을 유도합니다.
  - 복잡한 문제를 더 간단한 구성 요소로 분해하여 인간의 문제 해결 방식을 모방합니다.
- **복잡한 추론 작업에서의 이점**:
  - **정확성 향상**: 추론 과정을 명시적으로 만들어 계산 및 논리 오류를 줄입니다.
  - **투명성**: 모델이 답변에 도달하는 방법에 대한 통찰력을 제공합니다.
- **구현 전략과 모범 사례**:
  - **명시적 지시사항**: 모델에게 "각 단계를 설명하세요" 또는 "당신의 추론을 보여주세요"라고 프롬프트합니다.
  - **단계별 예제 포함**: 추론 단계를 포함한 유사한 문제를 해결하는 방법을 보여줍니다.
  - **일관된 형식 사용**: 추론 단계를 안내하기 위해 명확하고 논리적인 형식을 사용합니다.
- **예시**:

  - **수학 문제**:

    ```
    질문: "한 서점에서 책 한 권을 $12에 판매합니다. 고객이 책 5권을 구입하면 총 얼마를 지불해야 합니까? 당신의 추론을 설명하세요."

    답변: "책 한 권은 $12입니다. 고객이 5권의 책을 삽니다. 따라서, 5권 * $12/권 = $60. 따라서, 고객은 총 $60를 지불합니다."
    ```

  - **논리적 추론**:

    ```
    질문: "모든 장미는 꽃입니다. 일부 꽃은 빨리 시듭니다. 따라서, 일부 장미는 빨리 시듭니까? 당신의 추론을 설명하세요."

    답변: "모든 장미는 꽃이므로, 장미는 '꽃' 그룹의 일부입니다. 일부 꽃은 빨리 시드므로, 장미도 꽃이기 때문에 일부 장미가 빨리 시들 수 있습니다."
    ```

**요약**: 체인-오브-생각 기법은 중간 단계를 명시하도록 모델을 유도하여 복잡한 작업에서 더 정확하고 신뢰할 수 있는 출력을 제공합니다.

## 실용적인 예제와 연습 문제

### 예제 1: 제로샷 vs. 퓨샷 프롬프트

- **목표**: 텍스트 분류 작업에서 제로샷과 퓨샷 프롬프트의 성능을 비교합니다.
- **작업**: 트윗을 **스팸** 또는 **스팸 아님**으로 분류합니다.
- **제로샷 프롬프트**:

  ```
  다음 트윗을 "스팸" 또는 "스팸 아님"으로 분류하세요:

  "축하합니다! $1,000 기프트 카드를 받으셨습니다. 지금 수령하세요."
  ```

- **퓨샷 프롬프트**:

  ```
  각 트윗을 "스팸" 또는 "스팸 아님"으로 분류하세요:

  트윗: "이번 주말 우리의 특별 세일을 놓치지 마세요!"
  분류: 스팸 아님

  트윗: "현금 보상을 받을 수 있도록 선정되었습니다! 지금 저희 사이트를 방문하세요."
  분류: 스팸

  트윗: "AI 발전에 대한 웨비나에 참여하세요."
  분류: 스팸 아님

  트윗: "축하합니다! $1,000 기프트 카드를 받으셨습니다. 지금 수령하세요."
  분류:
  ```

- **지침**:
  - LLM을 사용하여 두 프롬프트에 대한 응답을 생성합니다.
  - 출력을 비교하고 어느 접근 방식이 더 정확한 분류를 제공하는지 평가합니다.
- **토론**:
  - 퓨샷 프롬프트에서 예제를 제공하는 것이 모델의 이해에 어떻게 영향을 미치는지 분석합니다.
  - 더 나은 결과를 위한 프롬프트 개선 방안을 논의합니다.

### 예제 2: 체인-오브-생각 구현

- **목표**: 체인-오브-생각 기법을 사용하여 실제 문제를 해결합니다.
- **프롬프트**:

  ```
  다음 문제를 단계별로 해결하세요:

  "에밀리는 쿠키를 굽고 있습니다. 한 배치를 만드는 데 설탕 2컵이 필요합니다. 그녀가 3배치를 만들고 싶지만 설탕이 5컵밖에 없다면, 그녀는 얼마나 더 필요한가요?"

  답변:
  ```

- **예상 출력**:

  ```
  한 배치를 위해 에밀리는 설탕 2컵이 필요합니다.
  3배치를 위해서는 2컵/배치 * 3배치 = 6컵의 설탕이 필요합니다.
  그녀에게는 설탕이 5컵 있습니다.
  그녀는 6컵 - 5컵 = 1컵이 더 필요합니다.
  따라서, 에밀리는 설탕 1컵이 더 필요합니다.
  ```

- **지침**:
  - 프롬프트를 LLM에 입력하고 출력을 관찰합니다.
  - 모델이 단계별 추론을 정확하게 따르는지 확인합니다.
- **연습 문제**:
  - 논리적 추론이 필요한 자신만의 문제를 만들어보세요.
  - 체인-오브-생각 기법을 적용하고 모델의 응답을 평가합니다.

## 결론

- **요약**:
  - **프롬프트 엔지니어링**은 다양한 NLP 작업에서 LLM의 성능을 최적화하는 데 필수적입니다.
  - 프롬프트 기법의 발전과 출력 품질에 대한 영향을 탐구했습니다.
  - 핵심 프롬프트 기법을 논의했습니다:
    - **제로샷 프롬프트**: 예제 없이 작업 수행.
    - **퓨샷 프롬프트**: 모델을 안내하기 위해 예제 제공.
    - **체인-오브-생각 기법**: 복잡한 작업을 위해 단계별 추론 유도.
- **미래 방향**:
  - 다음 세션에서는 **고급 프롬프트 전략**인 컨텍스트 설정, 작업 명세, 출력 형식 지정을 다룰 것입니다.
  - 다양한 프롬프트 기법을 실험하여 LLM 출력에 미치는 영향을 이해하도록 권장합니다.
